<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1251">
   <TITLE>Инструкция к программе K3Chess</TITLE>
</HEAD>
<BODY LANG="ru-RU">
<h1>Инструкция к программе K3Chess</h1>
<h2>Введение</h2>
K3Chess &mdash; это графическая оболочка для игры в шахматы, оптимизированная для
мобильных устройств и электронных книг. K3Chess поддерживает
шахматные программы (&laquo;движки&raquo;), работающие с протоколами
UCI и XBoard. K3Chess позволяет играть против программы или второго
игрока и сохранять игры в файле PGN.
<h2>Окно K3Chess</h2>
После запуска K3Chess на экране устройства отображаются следующие элементы:
<p></p>
<ul>
<li>Шахматная доска с координатами</li>
<li>Область меню (под шахматной доской)</li>
<li>Окно консоли (слева внизу)</li>
<li>Список ходов (справа внизу)</li>
</ul>
<h3>Область меню</h3>
Область меню расположена непосредственно под шахматной доской.  Она используется
для отображения доступных опций или команд и некоторых статических
сообщений.  Для выбора пункта меню используются клавиши <b>[Влево]</b>
и <b>[Вправо]</b>, назначенные при первом запуске программы. Как правило, клавиши
управления курсором назначаются на 5-позиционный джойстик. Для выбора
пункта меню нажмите клавишу <b>[Выбор]</b>
&mdash; как право, это центральная кнопка 5-позиционного джойстика.
Чтобы закрыть меню или отобразить дополнительное меню (если оно
доступно), нажмите клавишу <b>[Меню]</b>.
<p></p>
<b>Примечание.</b> Для открытия/закрытия меню также можно использовать кнопку
<b>[Back]</b> или <b>[Esc]</b>.
Эта кнопка является дополнительной и не включается в число
переназначаемых клавиш, поэтому она может работать не на всех
устройствах.
<h3>Окно консоли</h3>
Окно консоли предназначено для вывода сообщений, относящихся к текущей игре.
Например, в нём отображается информация о новой партии (имена игроков
и их настройки времени), предложения ничьих и результат партии по её
завершении.
<h3>Список ходов</h3>
По мере того как игроки делают ходы, список ходов пополняется строками в
формате SAN (стандартная арифметическая нотация). Этот формат является
стандартным для большинства шахматных программ. Список ходов можно
использовать для отслеживания хода игры и определения номера текущего
хода. При откате последнего хода он исключается из списка ходов. В
текущей версии K3Chess запись вариаций шахматной партии не
поддерживается.
<h2>Переназначение клавиш</h2>
При первом запуске программы K3Chess пользователю предлагается переназначить
клавиши, который будут использоваться для управления программой. Это позволяет
настроить программу для работы на конкретном устройстве, а также
учесть предпочтения пользователя. При появлении сообщения &laquo;Нажмите
клавишу &lt;xxx&gt;&raquo; необходимо нажать на устройстве клавишу,
которая соответствует функции &lt;xxx&gt;, например &laquo;влево&raquo;,
&laquo;вправо&raquo;, &laquo;меню&raquo;, &laquo;выбор&raquo; и т.д.
Управление курсором и выбор рекомендуется назначать на кнопки
5-позиционного джойстика. Клавиша &laquo;Обновить&raquo;
предназначена для принудительного обновления экрана e-Ink.
<p></p>
<b>Примечание.</b> При выборе клавиш рекомендуется не включать следующие
клавиши: <b>a, b, c, d, e, f, g, k, q, r, i, n, p,</b> поскольку они используются
для быстрого выбора хода по горизонтальной координате шахматной доски (<b>a&hellip;h</b>)
и по типу фигуры (<b>k, q, r, i, n, p</b>). Если при
переназначении клавиш была допущена ошибка или если нужно поменять
назначенные клавиши, закройте программу, нажав сочетание <b>[Alt]+[Back]</b>
(если это не удаётся сделать из-за переназначения одной из этих
клавиш, перезагрузите устройство), затем удалите файл &laquo;keys.ini&raquo;,
находящийся в каталоге программы K3Chess. При следующем запуске K3Chess
приглашение к переназначению клавиш будет отображено заново.
<h2>Как начать игру</h2>
После запуска программы K3Chess в области меню предлагаются следующие
варианты:
<p><b>&nbsp;&nbsp;&nbsp;Новая игра белыми&nbsp;&nbsp;&nbsp;Новая игра черными
&nbsp;&nbsp;&nbsp;Играть вдвоем</b></p>
Первые два варианта &mdash; это игра против шахматной программы (&laquo;движка&raquo;),
последний вариант &mdash; это игра с другим человеком, когда K3Chess
используется в качестве шахматной доски. Выберите нужный вариант
клавишами <b>[Влево]</b> и <b>[Вправо]</b> и
нажмите <b>[Выбор]</b>, чтобы начать игру.
<h2>Как играть</h2>
Для ввода ходов используются клавиши курсора и клавиша <b>[Выбор]</b>
и (или) буквенные клавиши. Последние предназначены для быстрого
выбора хода с минимальным числом нажатий клавиш и перемещений курсора
по доске, что особенно актуально для устройств с экранами e-Ink.
Чтобы выбрать фигуру, расположенную в определенном столбце, нажмите
клавишу этого этого столбца (<b>a ... h</b>).
Чтобы выбрать следующую фигуру в том же столбце, нажмите клавишу
столбца еще раз. Курсор будет устанавливаться только на те фигуры,
для которых в текущей позиции есть ходы. Чтобы выбрать фигуру определенного
номинала, нажмите клавишу: <b>K</b> для
короля, Q для королевы,
<b>R</b> для
ладьи, <b>I</b>
для слона, <b>N</b>
для коня, <b>P</b>
для пешки. Чтобы выбрать следующую фигуру такого же номинала, нажмите
соответствующую клавишу ещё раз.
<p>Если на устройстве
есть цифровые клавиши (или если они эмулируются), то можно также
переходить к определенной строке по её номеру (<b>1... 8</b>).</p>
<p>После того, как
курсор установлен на нужную фигуру, нажмите клавишу <b>[Выбор]</b>,
чтобы перейти к выбору хода. Если в настройках включен режим
&laquo;Показывать доступные ходы&raquo;, то все клетки, на которые
возможен ход данной фигурой, будут отмечены маленькими кружками.
Выбор клетки, на которую совершается ход, производится аналогично:
можно использовать как клавиши управления курсором, так и буквенные
клавиши. При этом клавиши <b>a
... h </b>по
очереди устанавливают курсор на доступную клетку в соответствующем
столбце (если таковая имеется), а клавиши <b>K,
Q, R, I, N</b> и
<b>P</b>
позволяют быстро выбрать ход со взятием, указав фигуру, которая будет
взята.</p>
<p>Если для хода
выбрана фигура, которая имеет только один разрешённый ход в текущей
позиции и включен режим &laquo;Быстрый выбор единственного хода&raquo;,
то ход будет выполняться сразу же после выбора самой этой фигуры.
Если это поведение программы покажется недостаточно интуитивным, то
следует отключить режим &laquo;Быстрый выбор единственного хода&raquo;
в окне настроек.</p>
<p><B>Примечание.</b>
Быстрый выбор хода ограничен только доступными ходами. Если при
нажатии клавиши ничего не происходит, убедитесь, что ход, который вы
хотите сделать, возможен в текущей позиции. В случае если для хода
выбрана некоторая фигура, но вы передумали и хотите выбрать другую
фигуру, подведите курсор к этой фигуре и нажмите клавишу <b>[Выбор]</b>.
Также можно отменить выбор фигуры, нажав клавишу <b>[Back]</b>
или <b>[Esc]</b>,
если эта клавиша поддерживается устройством.</p>
<h2>Меню партии</h2>
<p>В ходе партии
доступно меню действий, которое активируется нажатием клавиши <b>[Меню]</b>.
В него входят следующие пункты:</p>
<P>&nbsp;&nbsp;&nbsp;<B>Вернуть
ход&nbsp;&nbsp;&nbsp;Ничья&nbsp;&nbsp;&nbsp;Сдаться&nbsp;&nbsp;&nbsp;Прервать игру</b>
</p>
<p>Первая команда отменяет последний ход, вторая служит для предложения или
принятия ничьей, назначение оставшихся двух &mdash; это сдаться и
завершить партию с результатом &laquo;поражение&raquo; и прервать игру без сохранения
результата соответственно.</p>
<h2>Обновление экрана</h2>
<p>Экраны e-Ink требуют периодического обновления.  K3Chess не производит обновление
экрана после каждого хода, поэтому по мере необходимости можно 
обновлять экран вручную нажатием клавиши <b>[Обновить]</b>.
Одним из допустимых вариантов назначения этой клавиши является
клавиша &laquo;Пробел&raquo;, но вы можете выбрать любую другую
клавишу по своему усмотрению.</p>
<h2>Сохранение партии</h2>
<p>После завершения
партии отображается меню, в котором предлагается сохранить или не
сохранять игру. Сохраненные игры помещаются в файл &laquo;games.pgn&raquo;,
находящийся в папке программы K3Chess. Если этот файл не существует,
то он создается динамически, а все новые сохраняемые игр дописываются
в конец файла. Текущая версия K3Chess не позволяет просматривать
файлы PGN, однако для просмотра сохраненных игр вы можете
воспользоваться любой программой с данной функцией на компьютере или
другом устройстве.</p>
<h2>Изменение настроек программы </h2>
<p>На начальном экране
во время отображения меню новой партии нажмите клавишу <b>[Меню]</b>.
При этом откроется дополнительное меню со следующими пунктами:</p>
<P>&nbsp;&nbsp;&nbsp;<B>Настройки&nbsp;&nbsp;&nbsp;Выход</b>
</P>
<p>Выберите пункт меню &laquo;Настройки&raquo;, чтобы отобразить диалог
настроек. В этом диалоге можно изменять различные параметры программы,
включая стиль шахматных фигур, тип шахматной программы (&laquo;движка&raquo;),
настройки времени партии для игрока и для программы и др. Чтобы
закрыть диалог и применить настройки, нажмите клавишу <b>[Меню]</b>
(или <b>[Back]</b>/<b>[Esc]</b>).</p>
<p><b>Примечание.</b>
Кнопки &laquo;OK&raquo; и &laquo;Отмена&raquo; не предусмотрены,
поэтому новые настройки будут применены немедленно.</p>
<h2>Выход из программы</h2>
<p>Чтобы закрыть
программу и вернуться к домашнему экрану устройства, нажмите
сочетание клавиш <b>[Alt]</b>+<b>[Back]</b>.
 Также можно выбрать пункт &laquo;Выход&raquo; из дополнительного
меню, описанного выше.</p>
<h2>Добавление пользовательских стилей фигур</h2>
<p>Внешний вид фигур и свободных клеток доски определяется файлом
стиля, хранящимся в подпапке &laquo;pieces&raquo; папки K3Chess.
Вы можете скопировать или отредактировать любой из файлов этой папки,
для создания собственного стиля фигур. Не обязательно сохранять размер
изображения, но нужно сохранить его пропорции (7x4) и порядок
следования фигур и цветов клеток. Подпапка &laquo;pieces&raquo;
сканируется при каждом запуске программы K3Chess. Поддерживаются
изображения в форматах PNG, BMP и JPG. Выбор стиля фигур
осуществляется в окне настроек.</p>
<p><b>Примечание.</b>
Если в папке &laquo;pieces&raquo; будет несколько файлов с
одинаковыми именами, отличающихся только расширениями, то из каждой
такой группы файлов в окне настроек будет отображаться только один из
файлов. В связи с этим рекомендуется давать файлам уникальные имена
независимо от их расширения.</p>
<h2>Добавление шахматных программ</h2>
<p>Шахматные программы
представляют собой консольные приложения, запускаемые оболочкой и
работающие в фоновом режиме. Шахматные программы отличаются
особенностями игры и поддерживаемым протоколом. K3Chess позволяет
загружать любые программы (&laquo;движки&raquo;), совместимые с
протоколами UCI и XBoard и скомпилированные для работы на целевом
устройстве. Чтобы добавить шахматную программу, откройте подпапку
&laquo;engines&raquo; папки приложения K3Chess, создайте в ней новую
подпапку для программы, например, &laquo;MyEngine&raquo;. Затем
скопируйте исполняемый файл и файлы данных шахматной программы
(&laquo;движка&raquo;) в эту папку и создайте там же файл
&laquo;engine.ini&raquo; со следующим содержанием:</p>
<pre>
[Description]
EngineName=имя шахматной программы
Executable=имя	исполняемого файла программы
EngineType=тип программы (UCI или XBoard)
</pre>
<p>Если вы не уверены,
какой тип имеет программа, вы можете использовать следующее значение
параметра:</p>
<pre>
EngineType=Detect
</pre>
<p>В этом случае
K3Chess попытается определить тип программы автоматически при первом
обращении к этой программе. Это может занять несколько секунд. Если
шахматная программа уже установлена в другую папку, то можно не
копировать ее в папку &laquo;engines/MyEngine&raquo;, а просто
создать файл &laquo;engine.ini&raquo;, в котором указать в параметре
<code>Executable</code> полный путь к шахматной программе.</p>
<p>Если при загрузке шахматной программы нужно передать ей серию команд,
добавьте в файл &laquo;engine.ini&raquo; следующий раздел:</p>
<pre>
[Startup]
CommandCount=количество команд
Command1=команда 1
Command2=команда 2
...
</pre>
<p>Команды будут выполняться в порядке, соответствующем их нумерации. Некоторые
шахматные программы создают в ходе работы файлы журналов и другие
файлы. Если вы хотите, чтобы K3Chess удалял эти файлы автоматически,
добавьте в файл &laquo;engine.ini&raquo; следующий раздел:</P>
<pre>
[Cleanup]
DeleteFiles=маски файлов
</pre>
<p>например:</p>
<pre>
DeleteFiles="*.log;*.tmp"
</pre>
<h2>Локализация программы</h2>
<p>Можно добавлять пользовательские локализации или редактировать существующие
локализации, используемые K3Chess. Локализованные строки хранятся в
подпапке &laquo;locales&raquo; папки K3Chess.  Каждая локализация
представляет собой ini-файл определенного формата.  Чтобы создать
новую локализацию, сделайте копию существующего файла локализации и
отредактируйте ее.  Не забудьте изменить значение параметра
<code>LocaleName</code> в соответствии с целевым языком. Вновь созданный
файл будет добавлен в список поддерживаемых языков интерфейса в меню настроек
при следующем запуске программы.</p>
<h2>Включение и отключение журналов</h2>
<p>По умолчанию программа K3Chess создает журналы (&laquo;логи&raquo;)
в подкаталоге &laquo;logs&raquo; папки K3Chess. В файлы журналов заносится
информация о взаимодействии с шахматной программой и данные текущей
партии (позиции и доступные ходы). Эта информация предназначена для
отладки программы при обнаружении в ней ошибки. Если вы не хотите,
чтобы журналы создавались, достаточно удалить папку &laquo;logs&raquo;.
Если функция ведения журналов когда-нибудь понадобится снова,
достаточно будет создать папку &laquo;logs&raquo; заново. Все новые
журналы будут записываться в эту папку.</p>
<h2>Сообщения об ошибках в программе</h2>
<p>K3Chess является добровольным проектом. Если вы нашли ошибку или у вас есть
предложение, вы можете сообщить о них на странице
<a HREF="http://code.google.com/p/k3chess/issues">Issues</a> проекта.
При отправке отчета об ошибке рекомендуется прикладывать
содержимое папки &laquo;K3Chess/logs&raquo; в виде архива. Это
поможет быстрее установить причину ошибки. Если у вас отключено
ведение журналов и нет папки &laquo;K3Chess/logs&raquo;,
рекомендуется создать эту папку заново и попытаться воспроизвести
ошибку снова. Необходимо учесть, что при каждом запуске K3Chess
удаляет старое содержимое журналов, поэтому желательно закрывать
K3Chess сразу после обнаружения ошибки, чтобы сохранить актуальное
содержимого файлов журналов. Для быстрого выхода из программы можно
использовать сочетание клавиш <b>[Alt]</b>+<b>[Back]</b>.</p>
<BR><P><i>Инструкция к программе K3Chess. Последнее
обновление: 4 октября 2011 г.</i></p>
</BODY>
</HTML>